# Configuration Directory

This directory contains all configuration files for the Cross-Partition Bedrock Inference system.

## Structure

```
config/
├── config.example.sh          # Shell config template
├── config.sh                  # Your actual shell config (git-ignored)
├── config-vpn-example.sh      # VPN-specific shell config template
├── bedrock/                   # Bedrock configuration files
│   ├── README.md              # Bedrock config documentation
│   ├── bedrock-api-key-config.json      # Example API key structure
│   └── bedrock-full-access-policy.json  # IAM policy template
└── vpn-tunnels/               # VPN tunnel configurations
    ├── commercial-customer-gateway.yaml
    ├── deploy-commercial-vpn.sh
    ├── QUICK-REFERENCE.md
    └── tunnel-configuration-summary.md
```

## Shell Configuration Files

### `config.example.sh`
Template configuration file showing the expected structure and variables. This file is tracked in git and serves as documentation for the required configuration.

### `config.sh` (Git-ignored)
Your actual configuration file with real endpoints and credentials. This file is automatically generated by `./scripts/get-config.sh` or can be manually created by copying the example.

### `config-vpn-example.sh`
VPN-specific configuration template for VPN-based deployments.

## Bedrock Configuration Files

The `bedrock/` subdirectory contains Bedrock-specific configuration files and IAM policy templates for setting up cross-partition AI access.

## VPN Tunnel Configurations

The `vpn-tunnels/` subdirectory contains VPN-specific configuration files and deployment scripts for setting up cross-partition VPN connectivity.

## Usage

### Automatic Configuration (Recommended)
```bash
# Deploy your infrastructure first
./scripts/deploy-over-internet.sh
# or
./scripts/deploy-complete-vpn-infrastructure.sh

# Extract configuration from CloudFormation
./scripts/get-config.sh

# Source the configuration
source config/config.sh
```

### Manual Configuration
```bash
# Copy the example
cp config/config.example.sh config/config.sh

# Edit with your values
nano config/config.sh

# Source the configuration
source config/config.sh
```

## Environment Variables

The configuration sets these key environment variables:

- `API_BASE_URL` - Your API Gateway base URL
- `BEDROCK_ENDPOINT` - Bedrock invoke-model endpoint
- `MODELS_ENDPOINT` - Bedrock models discovery endpoint
- `AWS_REGION` - AWS region for your deployment
- `AWS_PROFILE` - AWS CLI profile to use
- `STACK_NAME` - CloudFormation stack name
- `BEDROCK_SECRET_NAME` - Secrets Manager secret for commercial credentials
- `TEST_MODEL_ID` - Default model ID for testing
- `TEST_MAX_TOKENS` - Default token limit for tests

## Security

- The `config.sh` file is git-ignored to prevent accidental commit of sensitive information
- Always use the example file as a template
- Never commit actual endpoints or credentials to version control